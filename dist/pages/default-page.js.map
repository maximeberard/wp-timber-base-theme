{"version":3,"sources":["pages/default-page.js"],"names":["DefaultPage","init","$scrollToLink","$cont","find","initEvents","on","scrollToLinkOnClick","bind","destroyEvents","off","e","$target","$","currentTarget","getAttribute","length","yPos","offset","top","BootstrapMedia","isMinSM","router","nav","offsetHeight","$bar","TweenLite","to","window","scrollTo","y","Math","round","preventDefault","initAjax","_paq","push","location","pathname","document","title","gtag","page_title","page_location","AbstractPage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAgBaA,W,WAAAA,W;;;;;;;;;8BACTC,I,mBAAO;AACH,oCAAMA,IAAN;AACA;;AAEA,iBAAKC,aAAL,GAAqB,KAAKC,KAAL,CAAWC,IAAX,CAAgB,iBAAhB,CAArB;AACH,S;;8BAEDC,U,yBAAa;AACT,oCAAMA,UAAN;AACA,iBAAKH,aAAL,CAAmBI,EAAnB,CAAsB,OAAtB,EAA+B,KAAKC,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAA/B;AACH,S;;8BAEDC,a,4BAAgB;AACZ,oCAAMA,aAAN;AACA,iBAAKP,aAAL,CAAmBQ,GAAnB,CAAuB,OAAvB,EAAgC,KAAKH,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAAhC;AACH,S;;8BAEDD,mB,gCAAoBI,C,EAAG;AACnB,gBAAIC,UAAUC,EAAE,MAAMF,EAAEG,aAAF,CAAgBC,YAAhB,CAA6B,aAA7B,CAAR,CAAd;;AAEA,gBAAIH,QAAQI,MAAZ,EAAoB;AAChB,oBAAIC,OAAOL,QAAQM,MAAR,GAAiBC,GAAjB,GAAuB,EAAlC;AACAF,wBAAQG,+BAAeC,OAAf,KACF,KAAKC,MAAL,CAAYC,GAAZ,CAAgBpB,KAAhB,CAAsB,CAAtB,EAAyBqB,YADvB,GAEF,KAAKF,MAAL,CAAYC,GAAZ,CAAgBE,IAAhB,CAAqB,CAArB,EAAwBD,YAF9B;AAGA;AACAE,0BAAUC,EAAV,CAAaC,MAAb,EAAqB,GAArB,EAA0B,EAAEC,UAAU,EAAEC,GAAGC,KAAKC,KAAL,CAAWf,IAAX,CAAL,EAAZ,EAA1B;AACH;AACDN,cAAEsB,cAAF;AACH,S;;8BAEDC,Q,uBAAW;AACP,oCAAMA,QAAN;;AAEA;AACA,gBAAI,OAAOC,IAAP,KAAgB,WAApB,EAAiC;AAC7B;AACA;AACAA,qBAAKC,IAAL,CAAU,CAAC,cAAD,EAAiBR,OAAOS,QAAP,CAAgBC,QAAjC,CAAV;AACAH,qBAAKC,IAAL,CAAU,CAAC,kBAAD,EAAqBG,SAASC,KAA9B,CAAV;AACAL,qBAAKC,IAAL,CAAU,CAAC,eAAD,CAAV;AACH;;AAED;AACA,gBAAI,OAAOK,IAAP,KAAgB,WAApB,EAAiC;AAC7B;AACAA,qBAAK,OAAL,EAAc,WAAd,EAA2B;AACvBC,gCAAYH,SAASC,KADE;AAEvBG,mCAAef,OAAOS,QAAP,CAAgBC;AAFR,iBAA3B;AAIH;AACJ,S;;;MApD4BM,0B","file":"default-page.js","sourcesContent":["/**\n * Copyright Maxime BÃ©rard 2016\n *\n * @file default-page.js\n * @copyright Maxime BÃ©rard 2016\n * @author Maxime BÃ©rard\n */\n\nimport scrollTo from \"scrollTo\";\nimport { Utils } from \"utils/utils\";\nimport { AbstractPage } from \"abstract-page\";\nimport { BootstrapMedia } from \"utils/bootstrapMedia\";\n\n/**\n * Abstract class to do common actions on every pages (like custom lazyload actions, etc.). Do not instanciate this class.\n */\nexport class DefaultPage extends AbstractPage {\n    init() {\n        super.init();\n        // if (this.context == \"ajax\") this.initAjax();\n\n        this.$scrollToLink = this.$cont.find(\".scroll-to-link\");\n    }\n\n    initEvents() {\n        super.initEvents();\n        this.$scrollToLink.on(\"click\", this.scrollToLinkOnClick.bind(this));\n    }\n\n    destroyEvents() {\n        super.destroyEvents();\n        this.$scrollToLink.off(\"click\", this.scrollToLinkOnClick.bind(this));\n    }\n\n    scrollToLinkOnClick(e) {\n        let $target = $(\"#\" + e.currentTarget.getAttribute(\"data-target\"));\n\n        if ($target.length) {\n            let yPos = $target.offset().top - 20;\n            yPos -= BootstrapMedia.isMinSM()\n                ? this.router.nav.$cont[0].offsetHeight\n                : this.router.nav.$bar[0].offsetHeight;\n            // console.log(yPos);\n            TweenLite.to(window, 0.6, { scrollTo: { y: Math.round(yPos) } });\n        }\n        e.preventDefault();\n    }\n\n    initAjax() {\n        super.initAjax();\n\n        // Matomo\n        if (typeof _paq !== \"undefined\") {\n            // console.log(window.location.pathname);\n            // console.log(document.title);\n            _paq.push([\"setCustomUrl\", window.location.pathname]);\n            _paq.push([\"setDocumentTitle\", document.title]);\n            _paq.push([\"trackPageView\"]);\n        }\n\n        // Analytics\n        if (typeof gtag !== \"undefined\") {\n            // console.log('ðŸš© Push Analytics for: ' + window.location.pathname);\n            gtag(\"event\", \"page_view\", {\n                page_title: document.title,\n                page_location: window.location.pathname,\n            });\n        }\n    }\n}\n"]}