{"version":3,"sources":["common/loader.js"],"names":["Loader","$cont","$inner","context","$body","isHome","className","indexOf","active","showStatic","gsap","to","window","duration","scrollTo","y","Utils","addClass","show","setTimeout","delay","hide","hideDelay","scrollTop","removeClass","viewportSize","getViewportSize","opacity","onComplete","onHidden","style","display"],"mappings":";;;;;;;;;;;;;;;;;;;;;;QAYaA,M,WAAAA,M;AACT,0BAAc;AAAA;;AACV;;AAEA,iBAAKC,KAAL,GAAa,sBAAE,UAAF,CAAb;AACA;AACA,iBAAKC,MAAL,GAAc,sBAAE,gBAAF,CAAd;;AAEA;AACA;AACA;AACA;;AAEA,iBAAKC,OAAL,GAAe,QAAf;;AAEA,iBAAKC,KAAL,GAAa,sBAAE,MAAF,CAAb;;AAEA,iBAAKC,MAAL,GAAc,KAAKD,KAAL,CAAW,CAAX,EAAcE,SAAd,CAAwBC,OAAxB,CAAgC,MAAhC,KAA2C,CAAzD;;AAEA,iBAAKC,MAAL,GAAc,IAAd;;AAEA,iBAAKC,UAAL;AACH;;yBAEDA,U,yBAAa;AACT;AACA;AACAC,iBAAKC,EAAL,CAAQC,MAAR,EAAgB,EAAEC,UAAU,GAAZ,EAAiBC,UAAU,EAAEC,GAAG,CAAL,EAA3B,EAAhB;;AAEA;AACA;AACA;;AAEAC,yBAAMC,QAAN,CAAe,KAAKb,KAAL,CAAW,CAAX,CAAf,EAA8B,gBAA9B;AACAY,yBAAMC,QAAN,CAAe,KAAKb,KAAL,CAAW,CAAX,CAAf,EAA8B,QAA9B;AACH,S;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;yBAEAc,I,mBAAO;AAAA;;AACHC,uBAAW,YAAM;AACb;;AAEA,sBAAKX,MAAL,GAAc,IAAd;;AAEA;AACAE,qBAAKC,EAAL,CAAQC,MAAR,EAAgB;AACZC,8BAAU,GADE;AAEZC,8BAAU,EAAEC,GAAG,CAAL,EAFE;AAGZK,2BAAO;AAHK,iBAAhB;;AAMAD,2BAAW,YAAM;AACbH,iCAAMC,QAAN,CAAe,MAAKb,KAAL,CAAW,CAAX,CAAf,EAA8B,gBAA9B;AACH,iBAFD,EAEG,IAFH;;AAIA;AACA;AACA;AACA;AACH,aApBD,EAoBG,EApBH;AAqBH,S;;yBAEDiB,I,mBAAO;AAAA;;AACH;;AAEA,gBAAIC,YAAY,GAAhB;AACA;;AAEA,kCAAEV,MAAF,EAAUW,SAAV,CAAoB,CAApB;AACAb,iBAAKC,EAAL,CAAQC,MAAR,EAAgB,EAAEC,UAAU,GAAZ,EAAiBC,UAAU,EAAEC,GAAG,CAAL,EAA3B,EAAhB;AACAC,yBAAMQ,WAAN,CAAkB,KAAKpB,KAAL,CAAW,CAAX,CAAlB,EAAiC,gBAAjC;;AAEA;AACA,gBAAIqB,eAAeT,aAAMU,eAAN,EAAnB;;AAEA;;AAEA;AACA;AACA;;AAEA,gBAAI,KAAKvB,OAAL,IAAgB,QAApB,EAA8B;AAC1BO,qBAAKC,EAAL,CAAQ,KAAKV,KAAb,EAAoB;AAChBY,8BAAU,CADM;AAEhBc,6BAAS,CAFO;AAGhBC,gCAAY,sBAAM;AACd,+BAAKC,QAAL;AACH;AALe,iBAApB;AAOH,aARD,MAQO,KAAKA,QAAL;AACV,S;;yBAEDA,Q,uBAAW;AACP;AACA,iBAAKrB,MAAL,GAAc,KAAd;;AAEA,iBAAKP,KAAL,CAAW,CAAX,EAAc6B,KAAd,CAAoBC,OAApB,GAA8B,MAA9B;AACA;AACA;AACA;;AAEA,gBAAI,KAAK5B,OAAL,IAAgB,QAApB,EAA8B;AAC1B,qBAAKA,OAAL,GAAe,MAAf;AACAa,6BAAMQ,WAAN,CAAkB,KAAKpB,KAAL,CAAW,CAAX,CAAlB,EAAiC,QAAjC;AACAY,6BAAMC,QAAN,CAAe,KAAKb,KAAL,CAAW,CAAX,CAAf,EAA8B,MAA9B;AACAY,6BAAMC,QAAN,CAAe,KAAKhB,KAAL,CAAW,CAAX,CAAf,EAA8B,cAA9B;AACA;AACH;AACJ,S","file":"loader.js","sourcesContent":["/**\n * Copyright Maxime BÃ©rard 2020\n *\n * @file loader.js\n * @copyright Maxime BÃ©rard 2020\n * @author Maxime BÃ©rard\n */\nimport $ from \"jquery\";\nimport { Utils } from \"utils/utils\";\nimport { Scroll } from \"utils/scroll\";\nimport { BootstrapMedia } from \"utils/bootstrapMedia\";\n\nexport class Loader {\n    constructor() {\n        // console.log('ðŸŒ€ LOADER INIT');\n\n        this.$cont = $(\"#loading\");\n        // this.$bg = $('#loading-bg');\n        this.$inner = $(\"#loading-inner\");\n\n        // Scroll.disable(); // enable();\n        // console.log('SCROLL DISABLE');\n        // $(window).scrollTop(0);\n        // gsap.to(window, { duration:0.6, scrollTo:{y:0}});\n\n        this.context = \"static\";\n\n        this.$body = $(\"body\");\n\n        this.isHome = this.$body[0].className.indexOf(\"home\") >= 0;\n\n        this.active = true;\n\n        this.showStatic();\n    }\n\n    showStatic() {\n        // console.log('ðŸŒ€ LOADER SHOW STATIC');\n        // Utils.addClass(this.$cont[0],'active');\n        gsap.to(window, { duration: 0.6, scrollTo: { y: 0 } });\n\n        // if (this.isHome) this.initHome();\n        // else\n        // gsap.fromTo(this.$cont, {duration: 0.6, opacity:0}, {opacity:1});\n\n        Utils.addClass(this.$body[0], \"loading-active\");\n        Utils.addClass(this.$body[0], \"static\");\n    }\n\n    // initHome () {\n    //     this.spanHomeText();\n\n    //     let $homeLink = this.$home.find('a');\n    //     $homeLink.addClass('no-ajax-link');\n\n    //     //     gsap.to(this.$homeText, {duration:1, opacity:1, onComplete: ()=> {\n    //         $homeLink.addClass('active');\n    //     }});\n    // }\n\n    show() {\n        setTimeout(() => {\n            // console.log('ðŸŒ€ LOADER SHOW');\n\n            this.active = true;\n\n            // Scroll.disable();\n            gsap.to(window, {\n                duration: 0.6,\n                scrollTo: { y: 0 },\n                delay: 0.4,\n            });\n\n            setTimeout(() => {\n                Utils.addClass(this.$body[0], \"loading-active\");\n            }, 1000);\n\n            // if (document.body.className.indexOf('nav-opened') >= 0)\n            // let viewportSize = Utils.getViewportSize();\n            // this.$cont[0].style.display = 'block';\n            // gsap.fromTo(this.$cont, { duration:0.6, y:viewportSize.height}, {y:0});\n        }, 50);\n    }\n\n    hide() {\n        // console.log('ðŸŒ€ LOADER HIDE');\n\n        let hideDelay = 600;\n        // if (this.context == 'static' && this.isHome) hideDelay = 1600;\n\n        $(window).scrollTop(0);\n        gsap.to(window, { duration: 0.6, scrollTo: { y: 0 } });\n        Utils.removeClass(this.$body[0], \"loading-active\");\n\n        // console.log('ðŸŒ€ LOADER HIDE ANIM');\n        let viewportSize = Utils.getViewportSize();\n\n        // if(window.location.hash == '') gsap.to(window, { duration:0.6,scrollTo:{y:0}});\n\n        // gsap.to(this.$cont,{ duration:0.6, y:-viewportSize.height, onComplete: () => {\n        //     this.onHidden();\n        // }});\n\n        if (this.context == \"static\") {\n            gsap.to(this.$cont, {\n                duration: 1,\n                opacity: 0,\n                onComplete: () => {\n                    this.onHidden();\n                },\n            });\n        } else this.onHidden();\n    }\n\n    onHidden() {\n        // console.log('ðŸŒ€ LOADER ON HIDDEN');\n        this.active = false;\n\n        this.$cont[0].style.display = \"none\";\n        // console.log('SCROLL ENABLE');\n        // $(window).scrollTop(0);\n        // Scroll.enable();\n\n        if (this.context == \"static\") {\n            this.context = \"ajax\";\n            Utils.removeClass(this.$body[0], \"static\");\n            Utils.addClass(this.$body[0], \"ajax\");\n            Utils.addClass(this.$cont[0], \"loading-ajax\");\n            // if (this.isHome) this.isHome = false;\n        }\n    }\n}\n"]}