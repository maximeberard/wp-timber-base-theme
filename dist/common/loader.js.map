{"version":3,"sources":["common/loader.js"],"names":["Loader","$cont","$inner","context","$body","isHome","className","indexOf","active","showStatic","TweenLite","to","window","scrollTo","y","autokill","Utils","addClass","show","setTimeout","delay","hide","hideDelay","scrollTop","removeClass","viewportSize","getViewportSize","opacity","onComplete","onHidden","style","display"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;QAcaA,M,WAAAA,M;AAET,0BAAc;AAAA;;AACV;;AAEA,iBAAKC,KAAL,GAAa,sBAAE,UAAF,CAAb;AACA;AACA,iBAAKC,MAAL,GAAc,sBAAE,gBAAF,CAAd;;AAEA;AACA;AACA;AACA;;AAEA,iBAAKC,OAAL,GAAe,QAAf;;AAEA,iBAAKC,KAAL,GAAa,sBAAE,MAAF,CAAb;;AAEA,iBAAKC,MAAL,GAAe,KAAKD,KAAL,CAAW,CAAX,EAAcE,SAAd,CAAwBC,OAAxB,CAAgC,MAAhC,KAA2C,CAA1D;;AAEA,iBAAKC,MAAL,GAAc,IAAd;;AAEA,iBAAKC,UAAL;AACH;;yBAEDA,U,yBAAc;AACV;AACA;AACAC,sBAAUC,EAAV,CAAaC,MAAb,EAAqB,GAArB,EAA0B,EAACC,UAAS,EAACC,GAAE,CAAH,EAAMC,UAAS,KAAf,EAAV,EAA1B;;AAEA;AACA;AACA;;AAEAC,yBAAMC,QAAN,CAAe,KAAKb,KAAL,CAAW,CAAX,CAAf,EAA6B,gBAA7B;AACAY,yBAAMC,QAAN,CAAe,KAAKb,KAAL,CAAW,CAAX,CAAf,EAA6B,QAA7B;AACH,S;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;yBAEAc,I,mBAAQ;AAAA;;AAEJC,uBAAW,YAAM;AACb;;AAEA,sBAAKX,MAAL,GAAc,IAAd;;AAEA;AACAE,0BAAUC,EAAV,CAAaC,MAAb,EAAqB,GAArB,EAA0B,EAACC,UAAS,EAACC,GAAE,CAAH,EAAV,EAAiBM,OAAM,GAAvB,EAA4BL,UAAS,KAArC,EAA1B;;AAEAI,2BAAW,YAAM;AACbH,iCAAMC,QAAN,CAAe,MAAKb,KAAL,CAAW,CAAX,CAAf,EAA8B,gBAA9B;AACH,iBAFD,EAEG,IAFH;;AAIA;AACA;AACA;AACA;AAEH,aAjBD,EAiBG,EAjBH;AAkBH,S;;yBAEDiB,I,mBAAQ;AAAA;;AACJ;;AAEA,gBAAIC,YAAY,GAAhB;AACA;;AAEA,kCAAEV,MAAF,EAAUW,SAAV,CAAoB,CAApB;AACAb,sBAAUC,EAAV,CAAaC,MAAb,EAAqB,GAArB,EAA0B,EAACC,UAAS,EAACC,GAAE,CAAH,EAAMC,UAAS,KAAf,EAAV,EAA1B;AACAC,yBAAMQ,WAAN,CAAkB,KAAKpB,KAAL,CAAW,CAAX,CAAlB,EAAgC,gBAAhC;;AAEA;AACA,gBAAIqB,eAAeT,aAAMU,eAAN,EAAnB;;AAEA;;AAEA;AACA;AACA;;AAEA,gBAAI,KAAKvB,OAAL,IAAgB,QAApB,EAA6B;AACzBO,0BAAUC,EAAV,CAAa,KAAKV,KAAlB,EAAyB,CAAzB,EAA4B,EAAC0B,SAAQ,CAAT,EAAYC,YAAY,sBAAM;AACtD,+BAAKC,QAAL;AACH,qBAF2B,EAA5B;AAGH,aAJD,MAKK,KAAKA,QAAL;AACR,S;;yBAEDA,Q,uBAAY;AACR;AACA,iBAAKrB,MAAL,GAAc,KAAd;;AAEA,iBAAKP,KAAL,CAAW,CAAX,EAAc6B,KAAd,CAAoBC,OAApB,GAA8B,MAA9B;AACA;AACA;AACA;;;AAGA,gBAAI,KAAK5B,OAAL,IAAgB,QAApB,EAA8B;AAC1B,qBAAKA,OAAL,GAAe,MAAf;AACAa,6BAAMQ,WAAN,CAAkB,KAAKpB,KAAL,CAAW,CAAX,CAAlB,EAAgC,QAAhC;AACAY,6BAAMC,QAAN,CAAe,KAAKb,KAAL,CAAW,CAAX,CAAf,EAA6B,MAA7B;AACAY,6BAAMC,QAAN,CAAe,KAAKhB,KAAL,CAAW,CAAX,CAAf,EAA8B,cAA9B;AACA;AACH;AACJ,S","file":"loader.js","sourcesContent":["/**\n * Copyright Maxime BÃ©rard 2020\n *\n * @file loader.js\n * @copyright Maxime BÃ©rard 2020\n * @author Maxime BÃ©rard\n */\nimport $ from 'jquery';\nimport {TweenMax} from \"TweenMax\";\nimport scrollTo from \"scrollTo\";\nimport {Utils} from \"utils/utils\";\nimport {Scroll} from 'utils/scroll';\nimport {BootstrapMedia} from \"utils/bootstrapMedia\";\n\nexport class Loader {\n\n    constructor() {\n        // console.log('ðŸŒ€ LOADER INIT');\n\n        this.$cont = $('#loading');\n        // this.$bg = $('#loading-bg');\n        this.$inner = $('#loading-inner');\n\n        // Scroll.disable(); // enable();\n        // console.log('SCROLL DISABLE');\n        // $(window).scrollTop(0);\n        // TweenLite.to(window, 0.6, {scrollTo:{y:0, autokill:false}});\n\n        this.context = 'static';\n\n        this.$body = $('body');\n\n        this.isHome = (this.$body[0].className.indexOf('home') >= 0);\n\n        this.active = true;\n\n        this.showStatic();\n    }\n\n    showStatic () {\n        // console.log('ðŸŒ€ LOADER SHOW STATIC');\n        // Utils.addClass(this.$cont[0],'active');\n        TweenLite.to(window, 0.6, {scrollTo:{y:0, autokill:false}});\n        \n        // if (this.isHome) this.initHome();\n        // else\n        // TweenLite.fromTo(this.$cont, 0.6, {opacity:0}, {opacity:1});\n\n        Utils.addClass(this.$body[0],'loading-active');\n        Utils.addClass(this.$body[0],'static');\n    }\n\n    // initHome () {\n    //     this.spanHomeText();\n\n    //     let $homeLink = this.$home.find('a');\n    //     $homeLink.addClass('no-ajax-link');\n        \n    //     TweenLite.to(this.$homeText, 1, {opacity:1, onComplete: ()=> {\n    //         $homeLink.addClass('active');\n    //     }});\n    // }\n\n    show () {\n\n        setTimeout(() => {\n            // console.log('ðŸŒ€ LOADER SHOW');\n            \n            this.active = true;\n\n            // Scroll.disable();\n            TweenLite.to(window, 0.6, {scrollTo:{y:0}, delay:0.4, autokill:false});\n\n            setTimeout(() => {\n                Utils.addClass(this.$body[0], 'loading-active');\n            }, 1000);\n\n            // if (document.body.className.indexOf('nav-opened') >= 0)\n            // let viewportSize = Utils.getViewportSize();\n            // this.$cont[0].style.display = 'block';\n            // TweenLite.fromTo(this.$cont, 0.6, {y:viewportSize.height}, {y:0});\n\n        }, 50);\n    }\n\n    hide () {\n        // console.log('ðŸŒ€ LOADER HIDE');\n\n        let hideDelay = 600;\n        // if (this.context == 'static' && this.isHome) hideDelay = 1600;\n\n        $(window).scrollTop(0);\n        TweenLite.to(window, 0.6, {scrollTo:{y:0, autokill:false}});\n        Utils.removeClass(this.$body[0],'loading-active');\n        \n        // console.log('ðŸŒ€ LOADER HIDE ANIM');\n        let viewportSize = Utils.getViewportSize();\n\n        // if(window.location.hash == '') TweenLite.to(window, 0.6, {scrollTo:{y:0}});\n\n        // TweenLite.to(this.$cont, 0.6, {y:-viewportSize.height, onComplete: () => {\n        //     this.onHidden();\n        // }});\n\n        if (this.context == 'static'){\n            TweenLite.to(this.$cont, 1, {opacity:0, onComplete: () => {\n                this.onHidden();\n            }});\n        }\n        else this.onHidden();\n    }\n\n    onHidden () {\n        // console.log('ðŸŒ€ LOADER ON HIDDEN');\n        this.active = false;\n\n        this.$cont[0].style.display = 'none';\n        // console.log('SCROLL ENABLE');\n        // $(window).scrollTop(0);\n        // Scroll.enable();\n\n\n        if (this.context == 'static') {\n            this.context = 'ajax';\n            Utils.removeClass(this.$body[0],'static');\n            Utils.addClass(this.$body[0],'ajax');\n            Utils.addClass(this.$cont[0], 'loading-ajax');\n            // if (this.isHome) this.isHome = false;\n        }\n    }\n}\n"]}