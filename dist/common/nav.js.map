{"version":3,"sources":["common/nav.js"],"names":["Nav","$cont","$list","$item","find","$link","$links","not","$btn","hasOverlay","$overlay","$bar","$btnBar","minifyLimit","BootstrapMedia","isMinMD","opened","initEvents","router","options","ajaxEnabled","on","onLinkClick","bind","btnClick","close","window","addEventListener","onScroll","onResize","destroyEvents","off","removeEventListener","e","scrollY","minified","minify","unminify","Utils","addClass","document","body","removeClass","isMinSM","open","onKeyUp","keyCode","style","display","TweenLite","fromTo","xPercent","to","opacity","y","rotation","delay","onComplete","backTopOnClick","scrollTo","preventDefault","AbstractNav"],"mappings":"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","file":"nav.js","sourcesContent":["/**\n * Copyright Maxime Bérard 2016\n *\n * @file nav.js\n * @copyright Maxime Bérard 2016\n * @author Maxime Bérard\n */\nimport $ from 'jquery';\n// import scrollTo from \"scrollTo\";\nimport { Utils } from \"utils/utils\";\nimport { debounce } from \"utils/debounce\";\nimport { AbstractNav } from 'abstract-nav';\nimport { BootstrapMedia } from \"utils/bootstrapMedia\";\n\nexport class Nav extends AbstractNav {\n    constructor() {\n        super();\n\n        this.$cont = $('#nav');\n        this.$list = $('#nav-list');\n        this.$item = this.$list.find('.nav-item');\n        this.$link = this.$list.find('.nav-link');\n        this.$links = this.$cont.find('a').not('[target=\"_blank\"]');\n\n        this.$btn = $('#nav-btn');\n        this.hasOverlay = false;\n        if (this.hasOverlay) this.$overlay = $('#nav-overlay');\n\n        this.$bar = $('#navbar');\n        this.$btnBar = this.$bar.find('.nav-btn-bar');\n        // this.$barBg = $('#navbar-bg');\n\n        // this.$backTop = $('#back-top');\n\n        this.minifyLimit = BootstrapMedia.isMinMD() ? 165 : 50;\n\n        this.opened = false;\n    }\n\n    initEvents(router) {\n        super.initEvents(router);\n\n        if (router.options.ajaxEnabled) {\n            this.$links.on('click', router.onLinkClick.bind(router));\n        }\n\n        this.$btn.on('click', this.btnClick.bind(this));\n        if (this.hasOverlay) this.$overlay.on('click', this.close.bind(this));\n\n        // this.$backTop.on('click', this.backTopOnClick.bind(this));\n\n        // window.addEventListener('keyup', this.onKeyUp.bind(this));\n        window.addEventListener('scroll', this.onScroll.bind(this));\n        window.addEventListener('resize', debounce(this.onResize.bind(this), 100, false));\n    }\n\n    destroyEvents(router) {\n        super.destroyEvents(router);\n\n        if (router.options.ajaxEnabled) {\n            this.$links.off('click', router.onLinkClick.bind(router));\n        }\n\n        this.$btn.off('click', this.btnClick.bind(this));\n        if (this.hasOverlay) this.$overlay.off('click', this.close.bind(this));\n\n        // this.$backTop.off('click', this.backTopOnClick.bind(this));\n\n        // window.removeEventListener('keyup', this.onKeyUp.bind(this));\n        window.removeEventListener('scroll', this.onScroll.bind(this));\n        window.removeEventListener('resize', debounce(this.onResize.bind(this), 100, false));\n    }\n\n    onScroll(e) {\n\n        if (window.scrollY > this.minifyLimit) {\n            if (!this.minified) this.minify();\n        }\n        else {\n            if (this.minified) this.unminify();\n        }\n    }\n\n    minify() {\n        Utils.addClass(document.body, 'nav-minified');\n        this.minified = true;\n    }\n\n    unminify() {\n        Utils.removeClass(document.body, 'nav-minified');\n        this.minified = false;\n    }\n\n    btnClick(e) {\n        if (!BootstrapMedia.isMinSM()) {\n            if (!this.opened) this.open();\n            else this.close();\n        }\n    }\n\n    onKeyUp(e) {\n        if (e.keyCode == 27 && this.opened) this.close();\n    }\n\n    open() {\n        if (!BootstrapMedia.isMinSM() && !this.opened) {\n\n            Utils.addClass(document.body, 'nav-opened');\n\n            this.$cont[0].style.display = 'block';\n            TweenLite.fromTo(this.$cont, 0.4, { xPercent: -100 }, { xPercent: 0 });\n\n            if (this.hasOverlay) {\n                this.$overlay[0].style.display = 'block';\n                TweenLite.to(this.$overlay, 1.2, { opacity: 1 });\n            }\n\n            // Btn\n            TweenLite.to(this.$btnBar[0], 0.3, { y: 9 });\n            TweenLite.to(this.$btnBar[2], 0.3, { y: -9 });\n            TweenLite.to(this.$btnBar[1], 0.3, { opacity: 0 });\n\n            TweenLite.to(this.$btnBar[0], 0.4, { rotation: 45, delay: 0.2 });\n            TweenLite.to(this.$btnBar[2], 0.4, { rotation: -45, delay: 0.2 });\n\n            this.opened = true;\n        }\n    }\n\n    close() {\n        if (!BootstrapMedia.isMinSM() && this.opened) {\n\n            TweenLite.to(this.$cont, 0.4, {\n                xPercent: -100, onComplete: () => {\n                    if (!this.opened) this.$cont[0].style.display = 'none';\n                    // document.body.removeAttribute('style');\n                }\n            });\n\n            if (this.hasOverlay) {\n                TweenLite.to(this.$overlay, 1.2, {\n                    opacity: 0, onComplete: () => {\n                        this.$overlay[0].style.display = 'none';\n                    }\n                });\n            }\n\n            // Btn\n            TweenLite.to(this.$btnBar[0], 0.4, { rotation: 0 });\n            TweenLite.to(this.$btnBar[2], 0.4, { rotation: 0 });\n\n            TweenLite.to(this.$btnBar[0], 0.3, { y: 0, delay: 0.2 });\n            TweenLite.to(this.$btnBar[2], 0.3, { y: 0, delay: 0.2 });\n            TweenLite.to(this.$btnBar[1], 0.3, { opacity: 1, delay: 0.2 });\n\n            Utils.removeClass(document.body, 'nav-opened');\n\n            this.opened = false;\n        }\n    }\n\n    backTopOnClick(e) {\n        TweenLite.to(window, 0.6, { scrollTo: { y: 0 } });\n        e.preventDefault();\n    }\n\n    onResize() {\n\n    }\n}\n"]}