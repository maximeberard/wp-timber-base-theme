{"version":3,"sources":["common/nav.js"],"names":["Nav","$cont","$list","$item","find","$link","$links","not","$btn","hasOverlay","$overlay","$bar","$btnBar","minifyLimit","BootstrapMedia","isMinMD","opened","initEvents","router","options","ajaxEnabled","on","onLinkClick","bind","btnClick","close","window","addEventListener","onScroll","onResize","destroyEvents","off","removeEventListener","e","scrollY","minified","minify","unminify","Utils","addClass","document","body","removeClass","isMinSM","open","style","display","TweenLite","fromTo","xPercent","to","opacity","y","rotation","delay","onComplete","AbstractNav"],"mappings":"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","file":"nav.js","sourcesContent":["/**\n * Copyright Maxime Bérard 2016\n *\n * @file nav.js\n * @copyright Maxime Bérard 2016\n * @author Maxime Bérard\n */\nimport $ from 'jquery';\nimport {Utils} from \"utils/utils\";\nimport {BootstrapMedia} from \"utils/bootstrapMedia\";\nimport {debounce} from \"utils/debounce\";\nimport {AbstractNav} from 'abstract-nav';\n\n/**\n *\n */\nexport class Nav extends AbstractNav {\n    constructor() {\n        super();\n\n        this.$cont = $('#nav');\n        this.$list = $('#nav-list');\n        this.$item = this.$list.find('.nav-item');\n        this.$link = this.$list.find('.nav-link');\n        this.$links = this.$cont.find('a').not('[target=\"_blank\"]');\n\n        this.$btn = $('#nav-btn');\n        this.hasOverlay = false; \n        if (this.hasOverlay) this.$overlay = $('#nav-overlay');\n        \n        this.$bar = $('#navbar');\n        this.$btnBar = this.$bar.find('.nav-btn-bar');\n        // this.$barBg = $('#navbar-bg');\n\n        this.minifyLimit = BootstrapMedia.isMinMD() ? 165 : 50;\n\n        this.opened = false;\n    }\n\n    initEvents(router) {\n        super.initEvents(router);\n\n        if (router.options.ajaxEnabled) {\n            this.$links.on('click', router.onLinkClick.bind(router));\n        }\n\n        this.$btn.on('click', this.btnClick.bind(this));\n        if (this.hasOverlay) this.$overlay.on('click', this.close.bind(this));\n\n        window.addEventListener('scroll', this.onScroll.bind(this));\n        window.addEventListener('resize', debounce(this.onResize.bind(this), 100, false));\n    }\n\n    destroyEvents(router) {\n\n        super.destroyEvents(router);\n\n        if (router.options.ajaxEnabled) {\n            this.$links.off('click', router.onLinkClick.bind(router));\n        }\n\n        this.$btn.off('click', this.btnClick.bind(this));\n        if (this.hasOverlay) this.$overlay.off('click', this.close.bind(this));\n\n        window.removeEventListener('scroll', this.onScroll.bind(this));\n        window.removeEventListener('resize', debounce(this.onResize.bind(this), 100, false));\n    }\n\n    /**\n     * Scroll\n     */\n    onScroll(e) {\n\n        if(window.scrollY > this.minifyLimit){\n            if(!this.minified) this.minify();\n        }\n        else{\n            if(this.minified) this.unminify();\n        }\n    }\n\n    minify() {\n\n        Utils.addClass(document.body,'nav-minified');\n        this.minified = true;\n    }\n\n    unminify() {\n\n        Utils.removeClass(document.body,'nav-minified');\n        this.minified = false;\n    }\n\n\n    /**\n     * Btn click\n     */\n    btnClick(e) {\n        if(!BootstrapMedia.isMinSM()) {\n            if(!this.opened) this.open();\n            else this.close();\n        }\n    }\n\n    open() {\n        if(!BootstrapMedia.isMinSM() && !this.opened){\n\n            this.$cont[0].style.display = 'block';\n            TweenLite.fromTo(this.$cont, 0.4, {xPercent:-100}, {xPercent:0});\n\n            if (this.hasOverlay) {\n                this.$overlay[0].style.display = 'block';\n                TweenLite.to(this.$overlay, 1.2, {opacity:1});\n            }\n\n            // Btn\n            TweenLite.to(this.$btnBar[0], 0.3, {y:9});\n            TweenLite.to(this.$btnBar[2], 0.3, {y:-9});\n            TweenLite.to(this.$btnBar[1], 0.3, {opacity:0});\n\n            TweenLite.to(this.$btnBar[0], 0.4, {rotation:45, delay:0.2});\n            TweenLite.to(this.$btnBar[2], 0.4, {rotation:-45, delay:0.2});\n\n            this.opened = true;\n        }\n    }\n\n    close() {\n        if(!BootstrapMedia.isMinSM() && this.opened){\n\n            TweenLite.to(this.$cont, 0.4, {xPercent:-100, onComplete: () => {\n                if(!this.opened) this.$cont[0].style.display = 'none';\n               // document.body.removeAttribute('style');\n            }});\n\n            if (this.hasOverlay) {\n                TweenLite.to(this.$overlay, 1.2, {opacity:0, onComplete: () => {\n                    this.$overlay[0].style.display = 'none';\n                }});\n            }\n\n            // Btn\n            TweenLite.to(this.$btnBar[0], 0.4, {rotation:0});\n            TweenLite.to(this.$btnBar[2], 0.4, {rotation:0});\n\n            TweenLite.to(this.$btnBar[0], 0.3, {y:0, delay:0.2});\n            TweenLite.to(this.$btnBar[2], 0.3, {y:0, delay:0.2});\n            TweenLite.to(this.$btnBar[1], 0.3, {opacity:1, delay:0.2});\n\n            this.opened = false;\n        }\n    }\n\n    onResize() {\n\n    }\n}\n"]}