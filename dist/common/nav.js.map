{"version":3,"sources":["common/nav.js"],"names":["Nav","$cont","$list","$item","find","$link","$links","not","$btn","hasOverlay","$overlay","$bar","$btnBar","minifyLimit","BootstrapMedia","isMinMD","opened","initEvents","router","options","ajaxEnabled","on","onLinkClick","bind","btnClick","close","window","addEventListener","onScroll","onResize","destroyEvents","off","removeEventListener","e","scrollY","minified","minify","unminify","Utils","addClass","document","body","removeClass","isMinSM","open","onKeyUp","keyCode","style","display","gsap","fromTo","xPercent","duration","to","opacity","y","rotation","delay","onComplete","backTopOnClick","scrollTo","preventDefault","AbstractNav"],"mappings":"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","file":"nav.js","sourcesContent":["/**\n * Copyright Maxime Bérard 2016\n *\n * @file nav.js\n * @copyright Maxime Bérard 2016\n * @author Maxime Bérard\n */\nimport $ from \"jquery\";\n// import scrollTo from \"scrollTo\";\nimport { Utils } from \"utils/utils\";\nimport { debounce } from \"utils/debounce\";\nimport { AbstractNav } from \"abstract-nav\";\nimport { BootstrapMedia } from \"utils/bootstrapMedia\";\n\nexport class Nav extends AbstractNav {\n    constructor() {\n        super();\n\n        this.$cont = $(\"#nav\");\n        this.$list = $(\"#nav-list\");\n        this.$item = this.$list.find(\".nav-item\");\n        this.$link = this.$list.find(\".nav-link\");\n        this.$links = this.$cont.find(\"a\").not('[target=\"_blank\"]');\n\n        this.$btn = $(\"#nav-btn\");\n        this.hasOverlay = false;\n        if (this.hasOverlay) this.$overlay = $(\"#nav-overlay\");\n\n        this.$bar = $(\"#navbar\");\n        this.$btnBar = this.$bar.find(\".nav-btn-bar\");\n        // this.$barBg = $('#navbar-bg');\n\n        // this.$backTop = $('#back-top');\n\n        this.minifyLimit = BootstrapMedia.isMinMD() ? 165 : 50;\n\n        this.opened = false;\n    }\n\n    initEvents(router) {\n        super.initEvents(router);\n\n        if (router.options.ajaxEnabled) {\n            this.$links.on(\"click\", router.onLinkClick.bind(router));\n        }\n\n        this.$btn.on(\"click\", this.btnClick.bind(this));\n        if (this.hasOverlay) this.$overlay.on(\"click\", this.close.bind(this));\n\n        // this.$backTop.on('click', this.backTopOnClick.bind(this));\n\n        // window.addEventListener('keyup', this.onKeyUp.bind(this));\n        window.addEventListener(\"scroll\", this.onScroll.bind(this));\n        window.addEventListener(\n            \"resize\",\n            debounce(this.onResize.bind(this), 100, false)\n        );\n    }\n\n    destroyEvents(router) {\n        super.destroyEvents(router);\n\n        if (router.options.ajaxEnabled) {\n            this.$links.off(\"click\", router.onLinkClick.bind(router));\n        }\n\n        this.$btn.off(\"click\", this.btnClick.bind(this));\n        if (this.hasOverlay) this.$overlay.off(\"click\", this.close.bind(this));\n\n        // this.$backTop.off('click', this.backTopOnClick.bind(this));\n\n        // window.removeEventListener('keyup', this.onKeyUp.bind(this));\n        window.removeEventListener(\"scroll\", this.onScroll.bind(this));\n        window.removeEventListener(\n            \"resize\",\n            debounce(this.onResize.bind(this), 100, false)\n        );\n    }\n\n    onScroll(e) {\n        if (window.scrollY > this.minifyLimit) {\n            if (!this.minified) this.minify();\n        } else {\n            if (this.minified) this.unminify();\n        }\n    }\n\n    minify() {\n        Utils.addClass(document.body, \"nav-minified\");\n        this.minified = true;\n    }\n\n    unminify() {\n        Utils.removeClass(document.body, \"nav-minified\");\n        this.minified = false;\n    }\n\n    btnClick(e) {\n        if (!BootstrapMedia.isMinSM()) {\n            if (!this.opened) this.open();\n            else this.close();\n        }\n    }\n\n    onKeyUp(e) {\n        if (e.keyCode == 27 && this.opened) this.close();\n    }\n\n    open() {\n        if (!BootstrapMedia.isMinSM() && !this.opened) {\n            Utils.addClass(document.body, \"nav-opened\");\n\n            this.$cont[0].style.display = \"block\";\n            gsap.fromTo(\n                this.$cont,\n                { xPercent: -100 },\n                { xPercent: 0, duration: 0.4 }\n            );\n\n            if (this.hasOverlay) {\n                this.$overlay[0].style.display = \"block\";\n                gsap.to(this.$overlay, { opacity: 1, duration: 1.2 });\n            }\n\n            // Btn\n            gsap.to(this.$btnBar[0], { y: 9, duration: 0.3 });\n            gsap.to(this.$btnBar[2], { y: -9, duration: 0.3 });\n            gsap.to(this.$btnBar[1], { opacity: 0, duration: 0.3 });\n\n            gsap.to(this.$btnBar[0], {\n                rotation: 45,\n                duration: 0.4,\n                delay: 0.2,\n            });\n            gsap.to(this.$btnBar[2], {\n                rotation: -45,\n                duration: 0.4,\n                delay: 0.2,\n            });\n\n            this.opened = true;\n        }\n    }\n\n    close() {\n        if (!BootstrapMedia.isMinSM() && this.opened) {\n            gsap.to(this.$cont, {\n                xPercent: -100,\n                duration: 0.4,\n                onComplete: () => {\n                    if (!this.opened) this.$cont[0].style.display = \"none\";\n                    // document.body.removeAttribute('style');\n                },\n            });\n\n            if (this.hasOverlay) {\n                gsap.to(this.$overlay, {\n                    opacity: 0,\n                    duration: 1.2,\n                    onComplete: () => {\n                        this.$overlay[0].style.display = \"none\";\n                    },\n                });\n            }\n\n            // Btn\n            gsap.to(this.$btnBar[0], { rotation: 0, duration: 0.4 });\n            gsap.to(this.$btnBar[2], { rotation: 0, duration: 0.4 });\n\n            gsap.to(this.$btnBar[0], { y: 0, duration: 0.3, delay: 0.2 });\n            gsap.to(this.$btnBar[2], { y: 0, duration: 0.3, delay: 0.2 });\n            gsap.to(this.$btnBar[1], { opacity: 1, duration: 0.3, delay: 0.2 });\n\n            Utils.removeClass(document.body, \"nav-opened\");\n\n            this.opened = false;\n        }\n    }\n\n    backTopOnClick(e) {\n        gsap.to(window, { scrollTo: { y: 0 }, duration: 0.6 });\n        e.preventDefault();\n    }\n\n    onResize() {}\n}\n"]}