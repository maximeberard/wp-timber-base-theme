{"version":3,"sources":["blocks/contact-block.js"],"names":["ContactBlock","init","$form","$cont","find","$formBtn","$formMessage","initEvents","length","on","$","proxy","formSubmit","destroyEvents","off","e","TweenLite","to","height","ajax","url","currentTarget","action","data","serialize","type","dataType","success","log","debug","status","className","innerHTML","message","actual","delay","error","responseJSON","errors","preventDefault","AbstractBlock"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAcaA,Y,WAAAA,Y;;;;;;;;;AAAqC;;+BAE9CC,I,mBAAO;AACH,qCAAMA,IAAN;;AAEA,iBAAKC,KAAL,GAAa,KAAKC,KAAL,CAAWC,IAAX,CAAgB,MAAhB,CAAb;AACA,iBAAKC,QAAL,GAAgB,KAAKH,KAAL,CAAWE,IAAX,CAAgB,QAAhB,CAAhB;AACA,iBAAKE,YAAL,GAAoB,KAAKH,KAAL,CAAWC,IAAX,CAAgB,eAAhB,CAApB;AACH,S;;+BAEDG,U,yBAAa;AACT,qCAAMA,UAAN;;AAEA,gBAAG,KAAKL,KAAL,CAAWM,MAAd,EAAsB,KAAKN,KAAL,CAAWO,EAAX,CAAc,QAAd,EAAwBC,iBAAEC,KAAF,CAAQ,KAAKC,UAAb,EAAyB,IAAzB,CAAxB;AACzB,S;;+BAEDC,a,4BAAgB;AACZ,qCAAMA,aAAN;;AAEA,gBAAG,KAAKX,KAAL,CAAWM,MAAd,EAAsB,KAAKN,KAAL,CAAWY,GAAX,CAAe,QAAf,EAAyBJ,iBAAEC,KAAF,CAAQ,KAAKC,UAAb,EAAyB,IAAzB,CAAzB;AACzB,S;;+BAEDA,U,uBAAWG,C,EAAG;AAAA;;AAEVC,sBAAUC,EAAV,CAAa,KAAKX,YAAlB,EAAgC,GAAhC,EAAqC,EAACY,QAAO,CAAR,EAArC;;AAEAR,6BAAES,IAAF,CAAO;AACHC,qBAAKL,EAAEM,aAAF,CAAgBC,MADlB;AAEHC,sBAAO,KAAKrB,KAAL,CAAWsB,SAAX,EAFJ;AAGHC,sBAAM,MAHH;AAIHC,0BAAU,MAJP;AAKHC,yBAAS,iBAACJ,IAAD,EAAU;AACfK,uCAAIC,KAAJ,CAAU,SAAV;AACAD,uCAAIC,KAAJ,CAAUN,KAAKO,MAAf;AACA,wBAAIP,KAAKO,MAAL,IAAe,SAAnB,EAA8B;AAC1B,+BAAKxB,YAAL,CAAkB,CAAlB,EAAqByB,SAArB,GAAiC,+BAA6BR,KAAKO,MAAnE;AACA,+BAAKxB,YAAL,CAAkB,CAAlB,EAAqB0B,SAArB,GAAiC,WAAST,KAAKU,OAAd,GAAsB,SAAvD;AAEH,qBAJD,MAIO;AACH,+BAAK3B,YAAL,CAAkB,CAAlB,EAAqByB,SAArB,GAAiC,mDAAiDR,KAAKO,MAAvF;AACA,+BAAKxB,YAAL,CAAkB,CAAlB,EAAqB0B,SAArB,GAAiC,WAAST,KAAKU,OAAd,GAAsB,SAAvD;AACH;;AAED,wBAAIf,SAAS,OAAKZ,YAAL,CAAkBF,IAAlB,CAAuB,MAAvB,EAA+B8B,MAA/B,CAAsC,aAAtC,CAAb;AACAlB,8BAAUC,EAAV,CAAa,OAAKX,YAAlB,EAAgC,GAAhC,EAAqC,EAACY,QAAOA,MAAR,EAAgBiB,OAAM,GAAtB,EAArC;AAEH,iBApBE;AAqBHC,uBAAO,eAACb,IAAD,EAAU;AACbK,uCAAIC,KAAJ,CAAU,OAAV;AACAN,2BAAOA,KAAKc,YAAZ;AACAT,uCAAIC,KAAJ,CAAUN,IAAV;AACA,2BAAKjB,YAAL,CAAkB,CAAlB,EAAqByB,SAArB,GAAiC,sEAAoER,KAAKO,MAA1G;AACA,2BAAKxB,YAAL,CAAkB,CAAlB,EAAqB0B,SAArB,GAAiC,WAAST,KAAKe,MAAd,GAAqB,SAAtD;;AAEA,wBAAIpB,SAAS,OAAKZ,YAAL,CAAkBF,IAAlB,CAAuB,MAAvB,EAA+B8B,MAA/B,CAAsC,aAAtC,CAAb;AACAlB,8BAAUC,EAAV,CAAa,OAAKX,YAAlB,EAAgC,GAAhC,EAAqC,EAACY,QAAOA,MAAR,EAAgBiB,OAAM,GAAtB,EAArC;AACH;AA9BE,aAAP;;AAiCApB,cAAEwB,cAAF;AACH,S;;;MA5D6BC,4B","file":"contact-block.js","sourcesContent":["/**\n * Copyright Maxime Bérard 2016\n *\n * @file contact-block.js\n * @copyright Maxime Bérard 2016\n * @author Maxime Bérard\n */\n\nimport $ from \"jquery\";\nimport TweenMax from \"TweenMax\";\nimport log from \"loglevel\";\nimport {AbstractBlock} from \"abstract-block\";\n// import {DefaultBlock} from \"blocks/default-block\";\n\nexport class ContactBlock extends AbstractBlock { // extends DefaultBlock\n\n    init() {\n        super.init();\n\n        this.$form = this.$cont.find('form');\n        this.$formBtn = this.$form.find('button');\n        this.$formMessage = this.$cont.find('.form-message');\n    }\n\n    initEvents() {\n        super.initEvents();\n\n        if(this.$form.length) this.$form.on('submit', $.proxy(this.formSubmit, this));\n    }\n\n    destroyEvents() {\n        super.destroyEvents();\n\n        if(this.$form.length) this.$form.off('submit', $.proxy(this.formSubmit, this));\n    }\n\n    formSubmit(e) {\n\n        TweenLite.to(this.$formMessage, 0.4, {height:0});\n\n        $.ajax({\n            url: e.currentTarget.action,\n            data : this.$form.serialize(),\n            type: 'post',\n            dataType: 'json',\n            success: (data) => {\n                log.debug('SUCCESS');\n                log.debug(data.status);\n                if (data.status != 'success') {\n                    this.$formMessage[0].className = 'form-message form-message-'+data.status;\n                    this.$formMessage[0].innerHTML = '<span>'+data.message+'</span>';\n\n                } else {\n                    this.$formMessage[0].className = 'form-message form-message-hidden form-message-'+data.status;\n                    this.$formMessage[0].innerHTML = '<span>'+data.message+'</span>';\n                }\n\n                var height = this.$formMessage.find('span').actual('outerHeight');\n                TweenLite.to(this.$formMessage, 0.6, {height:height, delay:0.2});\n\n            },\n            error: (data) => {\n                log.debug('ERROR');\n                data = data.responseJSON;\n                log.debug(data);\n                this.$formMessage[0].className = 'form-message form-message-hidden form-message-error form-message-'+data.status;\n                this.$formMessage[0].innerHTML = '<span>'+data.errors+'</span>';\n\n                var height = this.$formMessage.find('span').actual('outerHeight');\n                TweenLite.to(this.$formMessage, 0.6, {height:height, delay:0.2});\n            }\n        });\n\n        e.preventDefault();\n    }\n\n}\n\n"]}