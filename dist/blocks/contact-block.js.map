{"version":3,"sources":["blocks/contact-block.js"],"names":["ContactBlock","init","$form","$cont","find","$formBtn","$formMessage","initEvents","length","on","$","proxy","formSubmit","destroyEvents","off","e","gsap","to","height","duration","ajax","url","currentTarget","action","data","serialize","type","dataType","success","log","debug","status","className","innerHTML","message","actual","delay","error","responseJSON","errors","preventDefault","AbstractBlock"],"mappings":"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","file":"contact-block.js","sourcesContent":["/**\n * Copyright Maxime Bérard 2016\n *\n * @file contact-block.js\n * @copyright Maxime Bérard 2016\n * @author Maxime Bérard\n */\n\nimport $ from \"jquery\";\nimport log from \"loglevel\";\nimport { AbstractBlock } from \"abstract-block\";\n// import {DefaultBlock} from \"blocks/default-block\";\n\nexport class ContactBlock extends AbstractBlock {\n    // extends DefaultBlock\n\n    init() {\n        super.init();\n\n        this.$form = this.$cont.find(\"form\");\n        this.$formBtn = this.$form.find(\"button\");\n        this.$formMessage = this.$cont.find(\".form-message\");\n    }\n\n    initEvents() {\n        super.initEvents();\n\n        if (this.$form.length)\n            this.$form.on(\"submit\", $.proxy(this.formSubmit, this));\n    }\n\n    destroyEvents() {\n        super.destroyEvents();\n\n        if (this.$form.length)\n            this.$form.off(\"submit\", $.proxy(this.formSubmit, this));\n    }\n\n    formSubmit(e) {\n        gsap.to(this.$formMessage, { height: 0, duration: 0.4 });\n\n        $.ajax({\n            url: e.currentTarget.action,\n            data: this.$form.serialize(),\n            type: \"post\",\n            dataType: \"json\",\n            success: (data) => {\n                log.debug(\"SUCCESS\");\n                log.debug(data.status);\n                if (data.status != \"success\") {\n                    this.$formMessage[0].className =\n                        \"form-message form-message-\" + data.status;\n                    this.$formMessage[0].innerHTML =\n                        \"<span>\" + data.message + \"</span>\";\n                } else {\n                    this.$formMessage[0].className =\n                        \"form-message form-message-hidden form-message-\" +\n                        data.status;\n                    this.$formMessage[0].innerHTML =\n                        \"<span>\" + data.message + \"</span>\";\n                }\n\n                var height = this.$formMessage\n                    .find(\"span\")\n                    .actual(\"outerHeight\");\n                gsap.to(this.$formMessage, {\n                    height: height,\n                    duration: 0.6,\n                    delay: 0.2,\n                });\n            },\n            error: (data) => {\n                log.debug(\"ERROR\");\n                data = data.responseJSON;\n                log.debug(data);\n                this.$formMessage[0].className =\n                    \"form-message form-message-hidden form-message-error form-message-\" +\n                    data.status;\n                this.$formMessage[0].innerHTML =\n                    \"<span>\" + data.errors + \"</span>\";\n\n                var height = this.$formMessage\n                    .find(\"span\")\n                    .actual(\"outerHeight\");\n                gsap.to(this.$formMessage, {\n                    height: height,\n                    duration: 0.6,\n                    delay: 0.2,\n                });\n            },\n        });\n\n        e.preventDefault();\n    }\n}\n"]}