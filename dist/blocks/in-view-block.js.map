{"version":3,"sources":["blocks/in-view-block.js"],"names":["InviewBlock","init","delayInView","setTimeout","initInView","inViewDuration","inViewOffset","$cont","getAttribute","index","Number","initEvents","destroyEvents","waypoint","isInView","Waypoint","element","handler","onInView","bind","offset","Utils","addClass","inViewAnimation","DefaultBlock"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAcaA,W,WAAAA,W;;;;;;;;;8BACTC,I,mBAAO;AAAA;;AACH,oCAAMA,IAAN;;AAEA;;AAEA,gBAAIC,cAAc,GAAlB,CALG,CAKoB;AACvBC,uBAAW,YAAM;AACb,uBAAKC,UAAL;AACA;AACH,aAHD,EAGGF,WAHH;;AAKA,iBAAKG,cAAL,GAAsB,GAAtB;;AAEA,iBAAKC,YAAL,GAAoB,KAApB;;AAEA,gBAAI,KAAKC,KAAL,CAAW,CAAX,EAAcC,YAAd,CAA2B,oBAA3B,CAAJ,EAAsD;AAClD,qBAAKF,YAAL,GACI,KAAKC,KAAL,CAAW,CAAX,EAAcC,YAAd,CAA2B,oBAA3B,CADJ;AAEH;;AAED,iBAAKC,KAAL,GAAaC,OAAO,KAAKH,KAAL,CAAW,CAAX,EAAcC,YAAd,CAA2B,YAA3B,CAAP,CAAb;AACH,S;;8BAEDG,U,yBAAa;AACT,oCAAMA,UAAN;AACH,S;;8BAEDC,a,4BAAgB;AACZ,oCAAMA,aAAN;AACH,S;;8BAEDR,U,yBAAa;AACT;;AAEA;AACA;;AAEA,iBAAKS,QAAL,GAAgB,EAAhB;AACA,iBAAKC,QAAL,GAAgB,KAAhB;;AAEA;AACA;AACA;;AAEA,iBAAKD,QAAL,GAAgB,IAAIE,QAAJ,CAAa;AACzBC,yBAAS,KAAKT,KAAL,CAAW,CAAX,CADgB;AAEzBU,yBAAS,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAFgB;AAGzBC,wBAAQ,KAAKd;AAHY,aAAb,CAAhB;AAKA;AACH,S;;8BAEDY,Q,qBAAST,K,EAAO;AACZ;;AAEA,gBAAI,CAAC,KAAKK,QAAV,EAAoB;AAChB,qBAAKA,QAAL,GAAgB,IAAhB;AACAO,6BAAMC,QAAN,CAAe,KAAKf,KAAL,CAAW,CAAX,CAAf,EAA8B,SAA9B;AACA;AACA,qBAAKgB,eAAL;AACH;AACD;AACH,S;;8BAEDA,e,8BAAkB;AAAA;;AACd;;AAEApB,uBAAW,YAAM;AACbkB,6BAAMC,QAAN,CAAe,OAAKf,KAAL,CAAW,CAAX,CAAf,EAA8B,kBAA9B;AACH,aAFD,EAEG,KAAKF,cAFR;AAGH,S;;;MAvE4BmB,0B","file":"in-view-block.js","sourcesContent":["/**\n * Copyright Maxime BÃ©rard 2016\n *\n * @file in-view-block.js\n * @copyright Maxime BÃ©rard 2016\n * @author Maxime BÃ©rard\n */\n\nimport $ from \"jquery\";\nimport { Utils } from \"utils/utils\";\nimport { waypoint } from \"waypoint\";\nimport { DefaultBlock } from \"blocks/default-block\";\nimport { BootstrapMedia } from \"utils/bootstrapMedia\";\n\nexport class InviewBlock extends DefaultBlock {\n    init() {\n        super.init();\n\n        // console.log('ðŸ‘€ In view block');\n\n        let delayInView = 500; // (this.page.context == 'static') ? 500 : 1500;\n        setTimeout(() => {\n            this.initInView();\n            // this.page.router.$window.trigger('resize');\n        }, delayInView);\n\n        this.inViewDuration = 800;\n\n        this.inViewOffset = \"75%\";\n\n        if (this.$cont[0].getAttribute(\"data-inview-offset\")) {\n            this.inViewOffset =\n                this.$cont[0].getAttribute(\"data-inview-offset\");\n        }\n\n        this.index = Number(this.$cont[0].getAttribute(\"data-index\"));\n    }\n\n    initEvents() {\n        super.initEvents();\n    }\n\n    destroyEvents() {\n        super.destroyEvents();\n    }\n\n    initInView() {\n        // super.initInView();\n\n        // if (BootstrapMedia.isMinSM()) {\n        // this.page.router.deviceType == 'desktop' &&\n\n        this.waypoint = [];\n        this.isInView = false;\n\n        // console.log('ðŸ‘€ INVIEW - '+this.id+' - Init');\n        // console.log('offset : '+this.inViewOffset);\n        // console.log('---');\n\n        this.waypoint = new Waypoint({\n            element: this.$cont[0],\n            handler: this.onInView.bind(this),\n            offset: this.inViewOffset,\n        });\n        // }\n    }\n\n    onInView(index) {\n        // console.log('ðŸ‘€ INVIEW - '+this.id+' - on view');\n\n        if (!this.isInView) {\n            this.isInView = true;\n            Utils.addClass(this.$cont[0], \"in-view\");\n            // console.log('ðŸ‘€ INVIEW - '+this.id+' - OK');\n            this.inViewAnimation();\n        }\n        // else console.log('< already Inview');\n    }\n\n    inViewAnimation() {\n        // console.log('ðŸ‘€ INVIEW - '+this.id+' - Animation');\n\n        setTimeout(() => {\n            Utils.addClass(this.$cont[0], \"in-view-finished\");\n        }, this.inViewDuration);\n    }\n}\n"]}