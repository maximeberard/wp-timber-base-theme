{"version":3,"sources":["blocks/horizontal-scroll.js"],"names":["HorizontalScroll","init","dir","dirMultiplier","animationDuration","enabledXs","enabled","$inner","$cont","find","$item","itemHTML","length","outerHTML","itemWidth","itemMarginRight","itemsCount","bodyWidth","document","body","clientWidth","contWidth","windowSize","Utils","getViewportSize","itemTimeline","firstSetup","onResize","initEvents","destroyEvents","contOnEnter","e","pause","preventDefault","contOnLeave","play","setInnerDOM","innerHTML","indexItem","style","width","setInitialItemsPos","centerItemIndex","Math","floor","innerXInitial","lastCenterItemIndex","ceil","firstLastItemsDiff","innerXFinal","innerXFrom","innerXTo","innerXCurrent","animate","kill","TimelineMax","repeat","repeatDelay","fromTo","x","ease","Linear","easeNone","onAnimationComplete","BootstrapMedia","isMinSM","actual","eq","parseInt","getStyle","styleName","styleValue","defaultView","getComputedStyle","getPropertyValue","currentStyle","replace","strMatch","p1","toUpperCase","DefaultBlock"],"mappings":"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","file":"horizontal-scroll.js","sourcesContent":["/**\n * Copyright Maxime Bérard 2016\n *\n * @file horizontal-scroll.js\n * @copyright Maxime Bérard 2016\n * @author Maxime Bérard\n */\n\nimport $ from \"jquery\";\nimport actual from \"actual\";\nimport { Utils } from \"utils/utils\";\nimport { BootstrapMedia } from \"utils/bootstrapMedia\";\nimport { DefaultBlock } from \"blocks/default-block\";\n\nexport class HorizontalScroll extends DefaultBlock {\n    init() {\n        super.init();\n\n        // console.log(\"👋 --- Horizontal scroll --- 👋\");\n        // console.log(this.id);\n\n        this.dir = \"left\"; // this.$cont[0].getAttribute('data-dir');\n        this.dirMultiplier = this.dir == \"right\" ? 1 : -1;\n\n        this.animationDuration = 18; // seconds\n\n        this.enabledXs = true; //(Number(this.$cont[0].getAttribute('data-enabled-xs')) == 1);\n        this.enabled = true; //(Number(this.$cont[0].getAttribute('data-enabled')) == 1);\n        // console.log('enable xs : '+this.enabledXs);\n        // console.log('---');\n\n        this.$inner = this.$cont.find(\".horizontal-scroll-inner\");\n        this.$item = this.$cont.find(\".horizontal-scroll-item\");\n        this.itemHTML = this.$item.length ? this.$item[0].outerHTML : \"\";\n\n        this.itemWidth = 0;\n        this.itemMarginRight = 0;\n        this.itemsCount = 1;\n\n        this.bodyWidth = document.body.clientWidth;\n        this.contWidth = 0;\n        this.windowSize = Utils.getViewportSize();\n\n        this.itemTimeline = null;\n\n        this.firstSetup = true;\n\n        this.onResize();\n\n        // this.bindedOnFrame = this.onFrame.bind(this);\n        // this.RAF = null;\n\n        // console.log('dir : '+this.dir);\n        // console.log('width : '+this.itemWidth);\n        // console.log('DOM : ');\n        // console.log(this.itemHTML);\n        // console.log('---');\n    }\n\n    initEvents() {\n        super.initEvents();\n        // this.$cont.on(\"mouseenter\", this.contOnEnter.bind(this));\n        // this.$cont.on(\"mouseleave\", this.contOnLeave.bind(this));\n    }\n\n    destroyEvents() {\n        super.destroyEvents();\n        // this.$cont.off(\"mouseenter\", this.contOnEnter.bind(this));\n        // this.$cont.off(\"mouseleave\", this.contOnLeave.bind(this));\n    }\n\n    contOnEnter(e) {\n        this.pause();\n        e.preventDefault();\n    }\n\n    contOnLeave(e) {\n        this.play();\n        e.preventDefault();\n    }\n\n    setInnerDOM(itemsCount) {\n        if (itemsCount !== this.itemsCount) {\n            let innerHTML = \"\";\n\n            for (let indexItem = 0; indexItem <= itemsCount - 1; indexItem++) {\n                innerHTML += this.itemHTML;\n            }\n\n            this.$inner[0].innerHTML = innerHTML;\n            this.$item = this.$cont.find(\".horizontal-scroll-item\");\n\n            this.itemsCount = itemsCount;\n\n            this.$inner[0].style.width =\n                (this.itemWidth + this.itemMarginRight) * this.itemsCount +\n                5 +\n                \"px\";\n\n            this.setInitialItemsPos();\n        }\n    }\n\n    setInitialItemsPos() {\n        let centerItemIndex = Math.floor(this.itemsCount / 2) - 1,\n            // centerItemOffset = (this.itemWidth + this.itemMarginRight) * centerItemIndex,\n            // itemCenterPos = (this.windowSize.width / 2) - (this.itemWidth / 2),\n            innerXInitial = 10; //- (centerItemOffset - itemCenterPos);\n\n        let lastCenterItemIndex = Math.ceil(this.itemsCount / 2),\n            firstLastItemsDiff = lastCenterItemIndex - centerItemIndex,\n            innerXFinal =\n                innerXInitial -\n                firstLastItemsDiff * (this.itemWidth + this.itemMarginRight);\n\n        // console.log(\"inner X initial : \" + innerXInitial);\n        // console.log(\"inner X final : \" + innerXFinal);\n\n        this.innerXFrom = this.dir == \"left\" ? innerXInitial : innerXFinal;\n        this.innerXTo = this.dir == \"left\" ? innerXFinal : innerXInitial;\n        this.innerXCurrent = this.innerXFrom;\n\n        this.animationDuration = -innerXFinal / 80;\n        // console.log(this.animationDuration);\n        // console.log('inner X from : '+this.innerXFrom);\n\n        if (this.firstSetup) {\n            // gsap.to(this.$cont, {opacity:1, duration:0.8, });\n            this.firstSetup = false;\n        }\n\n        // this.initAnimation();\n        this.animate();\n    }\n\n    // initAnimation () {\n    //     console.log('INIT ANIMATION : '+this.id);\n    //     this.RAF = requestAnimFrame(this.bindedOnFrame);\n    // }\n\n    // stopAnimation () {\n    //     console.log('STOP ANIMATION : '+this.id);\n    //     if (this.RAF !== null) cancelAnimFrame(this.RAF);\n    // }\n\n    // onFrame () {\n\n    //     if (this.innerXCurrent !== this.innerXTo) {\n    //         this.innerXCurrent += this.dirMultiplier;\n    //     } else{\n    //         this.innerXCurrent = this.innerXFrom;\n    //     }\n\n    //     gsap.set(this.$inner, {x:this.innerXCurrent});\n\n    //     this.RAF = requestAnimFrame(this.bindedOnFrame);\n    // }\n\n    animate() {\n        if (this.itemTimeline !== null) this.itemTimeline.kill();\n\n        this.itemTimeline = new TimelineMax({ repeat: -1, repeatDelay: 0 }); // , onComplete:this.onAnimationComplete\n        this.itemTimeline.fromTo(\n            this.$inner,\n            this.animationDuration,\n            { x: this.innerXFrom },\n            { x: this.innerXTo, ease: Linear.easeNone }\n        );\n        // this.itemTimeline.pause();\n        // gsap.set(this.$inner, {x:this.innerXFrom});\n        // gsap.fromTo(this.$inner, {x:this.innerXFrom}, {x:this.innerXTo, duration:5, ease:Linear.none});\n    }\n\n    onAnimationComplete() {\n        // console.log('ANIMATION COMPLETE');\n    }\n\n    play() {\n        // console.log('⏯ PLAY - '+this.id);\n        if (this.itemTimeline !== null) this.itemTimeline.play();\n    }\n\n    pause() {\n        // console.log('⏯ PAUSE - '+this.id);\n        if (this.itemTimeline !== null) this.itemTimeline.pause();\n    }\n\n    onResize() {\n        // console.log('Horizontal scroll - RESIZE - '+this.id);\n        // console.log(Utils.getViewportSize());\n        // console.log(BootstrapMedia.isMinSM());\n        // console.log(this.enabledXs);\n\n        if (!this.enabled || (!BootstrapMedia.isMinSM() && !this.enabledXs))\n            return;\n\n        // console.log(\"horizontal scroll ok\");\n\n        this.windowSize = Utils.getViewportSize();\n        this.bodyWidth = document.body.clientWidth;\n        this.$cont[0].style.width = \"\";\n        this.contWidth = this.$cont.actual(\"width\");\n\n        // if (this.contWidth < this.bodyWidth) {\n        //     let marginLeft = (Math.round(-(this.bodyWidth - this.contWidth) / 2));\n\n        //     this.$cont[0].style.marginLeft = '';\n\n        //     this.$cont[0].style.width = this.bodyWidth + 'px';\n        //     this.$cont[0].style.marginLeft = marginLeft + 'px';\n        //     this.contWidth = this.bodyWidth;\n\n        //     this.$cont[0].setAttribute('data-margin-left',marginLeft);\n        // }\n\n        this.itemWidth = this.$item.length\n            ? this.$item.eq(0).actual(\"width\")\n            : 0;\n\n        this.itemMarginRight = this.$item.length\n            ? parseInt(this.getStyle(this.$item[0], \"margin-right\"))\n            : 0;\n\n        // if (this.id == 'prestation-title-2'){\n        //     console.log(this.id);\n        //     console.log('window size : '+this.windowSize.width);\n        //     console.log('cont width  : '+this.contWidth);\n        //     // console.log('item width  : '+this.itemWidth);\n        //     // console.log('item mr     : '+this.itemMarginRight);\n        // }\n\n        let itemsCount = Math.ceil(\n            (2 * this.windowSize.width) / this.itemWidth\n        );\n        if (itemsCount < 2) itemsCount = 2;\n\n        this.setInnerDOM(itemsCount);\n\n        // console.log(\"number items : \" + itemsCount);\n        // console.log(\"----\");\n    }\n\n    getStyle(e, styleName) {\n        var styleValue = \"\";\n        if (document.defaultView && document.defaultView.getComputedStyle) {\n            styleValue = document.defaultView\n                .getComputedStyle(e, \"\")\n                .getPropertyValue(styleName);\n        } else if (e.currentStyle) {\n            styleName = styleName.replace(/\\-(\\w)/g, function (strMatch, p1) {\n                return p1.toUpperCase();\n            });\n            styleValue = e.currentStyle[styleName];\n        }\n        return styleValue;\n    }\n}\n"]}